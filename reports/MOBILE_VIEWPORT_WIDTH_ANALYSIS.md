# Mobile Viewport Width Issue - Analysis & Fixes

## Issue Description
Window width appearing too large on mobile devices, causing horizontal scrolling or content extending beyond viewport.

## Root Cause Analysis

### 1. ✅ **Viewport Meta Tag** - Already Correct
**Location:** `src/app/layout.tsx` (generated by Next.js)

Next.js automatically adds:
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

**Status:** ✅ No changes needed

---

### 2. ⚠️ **Missing `overflow-x` Control on Body/HTML**
**Location:** `src/app/globals.css`

**Current:**
```css
html, body {
  height: 100%;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}
```

**Problem:** No `overflow-x` control to prevent horizontal scroll

**Fix Required:**
```css
html, body {
  height: 100%;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  overflow-x: hidden; /* Prevent horizontal scroll */
  max-width: 100vw; /* Constrain to viewport width */
}
```

---

### 3. ⚠️ **Fixed Width Elements**
**Potential Culprits:**

#### a) Contact Form Width
**File:** `src/components/home/ContactFormSection.tsx:170`
```tsx
<div className="w-full lg:w-[45%] xl:w-[42%] bg-white/95 ...">
```

**Analysis:** Uses percentage-based widths on desktop, `w-full` on mobile ✅
**Status:** Safe for mobile

#### b) Hero Text Max-Width
**File:** `src/components/home/Hero2.tsx:95,98`
```tsx
<h1 className="... max-w-[500px] sm:max-w-[550px] md:max-w-full">
<p className="... max-w-[450px] sm:max-w-[500px] md:max-w-full">
```

**Analysis:** Fixed pixel widths (500px, 550px) on small screens
**Problem:** If container has padding/margin, total width can exceed viewport
**Status:** ⚠️ Potential issue on narrow devices (<400px)

---

### 4. ⚠️ **Container Padding Issues**
Elements with fixed widths + padding can exceed viewport:

**Common Pattern:**
```tsx
<div className="px-8">  {/* 64px total padding */}
  <h1 className="max-w-[500px]">  {/* 500px content */}
    {/* Total: 564px on mobile! */}
  </h1>
</div>
```

**On 375px viewport:**
- Container padding: 64px (8 × 2)
- Content width: 500px
- **Total:** 564px → **189px overflow!** ❌

---

### 5. ⚠️ **Absolute Positioning & Transform**
Elements with `absolute` positioning and transforms can extend beyond viewport:

**Check for:**
- `position: absolute` without parent constraints
- `transform: translateX()` moving elements off-screen
- Fixed-width modals/dropdowns

---

## Suspected Components (Priority Order)

### High Priority:
1. **Hero2 Section** - Fixed max-widths on mobile
2. **Navigation** - Could have fixed-width elements
3. **Modals/Dropdowns** - Often cause overflow

### Medium Priority:
4. **Process Section** - Uses `w-[45%]` and `w-[90%]`
5. **Image Containers** - Fixed aspect ratios

### Low Priority:
6. **Footer** - Usually responsive
7. **Contact Form** - Already using `w-full` on mobile

---

## Recommended Fixes

### Fix 1: Add Overflow Control to Globals
**File:** `src/app/globals.css`

```css
@layer base {
  html, body {
    height: 100%;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    overflow-x: hidden; /* ← ADD THIS */
    max-width: 100vw;   /* ← ADD THIS */
  }

  /* Ensure all direct children of body also constrain */
  body > * {
    max-width: 100vw;
    overflow-x: hidden;
  }
}
```

---

### Fix 2: Add Page-Level Overflow Control
**File:** `src/app/page.tsx`

Wrap the main App component:

```tsx
const App = () => {
  return (
    <div className="overflow-x-hidden max-w-screen">  {/* ← ADD WRAPPER */}
      <Navigation />
      <Hero2 />
      <AboutUsSection />
      {/* ... rest of components */}
    </div>
  );
};
```

---

### Fix 3: Fix Hero Text Max-Widths
**File:** `src/components/home/Hero2.tsx`

**Option A: Use Percentages**
```tsx
<h1 className="... max-w-[95%] sm:max-w-[550px] md:max-w-full">
<p className="... max-w-[90%] sm:max-w-[500px] md:max-w-full">
```

**Option B: Use Viewport-Based Widths**
```tsx
<h1 className="... max-w-[min(500px,90vw)] sm:max-w-[550px] md:max-w-full">
<p className="... max-w-[min(450px,85vw)] sm:max-w-[500px] md:max-w-full">
```

**Option C: Remove Mobile Max-Width (Simplest)**
```tsx
<h1 className="... sm:max-w-[550px] md:max-w-full">  {/* No mobile constraint */}
<p className="... sm:max-w-[500px] md:max-w-full">   {/* No mobile constraint */}
```

---

### Fix 4: Audit Container Padding
**Global Search Pattern:**
```regex
className=".*px-\d+.*max-w-\[
```

**Common Fixes:**
- Reduce mobile padding: `px-4 sm:px-8`
- Remove mobile max-widths: use only on sm+ breakpoints
- Use `container` class with auto margins

---

### Fix 5: Add Utility Class
**File:** `src/app/globals.css`

```css
@layer utilities {
  .safe-width {
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  .mobile-safe {
    @apply safe-width px-4 sm:px-6 md:px-8;
  }
}
```

**Usage:**
```tsx
<section className="mobile-safe">
  {/* Content automatically safe for mobile */}
</section>
```

---

## Testing Checklist

### Device Sizes to Test:
- [ ] 320px (iPhone SE, older Android)
- [ ] 375px (iPhone 12/13 mini, iPhone SE 2nd gen)
- [ ] 390px (iPhone 14/15 Pro)
- [ ] 414px (iPhone 11 Pro Max, Pixel 5)
- [ ] 428px (iPhone 14 Plus, iPhone 13 Pro Max)

### Chrome DevTools:
1. Open DevTools (F12)
2. Toggle device toolbar (Ctrl+Shift+M)
3. Select "Responsive"
4. Test widths: 320px, 375px, 390px, 428px
5. Check for horizontal scrollbar
6. Use "Show rulers" to see exact dimensions

### Manual Check:
```javascript
// Run in browser console
console.log('Viewport:', window.innerWidth);
console.log('Document:', document.documentElement.scrollWidth);
console.log('Overflow:', document.documentElement.scrollWidth > window.innerWidth);
```

If `scrollWidth > innerWidth`, there's an overflow issue.

---

## Detection Script
Add temporarily to find culprit elements:

```javascript
// Run in browser console on mobile
function findOverflowElements() {
  const viewportWidth = window.innerWidth;
  const elements = document.querySelectorAll('*');
  const culprits = [];
  
  elements.forEach(el => {
    const rect = el.getBoundingClientRect();
    if (rect.right > viewportWidth || rect.left < 0) {
      culprits.push({
        element: el,
        tag: el.tagName,
        classes: el.className,
        width: rect.width,
        right: rect.right,
        overflow: rect.right - viewportWidth
      });
    }
  });
  
  // Sort by overflow amount
  culprits.sort((a, b) => b.overflow - a.overflow);
  
  console.table(culprits.slice(0, 10)); // Top 10 offenders
  return culprits;
}

findOverflowElements();
```

---

## Implementation Priority

### Immediate (Do First):
1. ✅ Add `overflow-x: hidden` to `html, body` in globals.css
2. ✅ Add page-level wrapper with `overflow-x-hidden` in page.tsx

### High Priority:
3. Fix Hero2 max-widths (remove mobile constraints)
4. Test on 320px, 375px, 390px devices

### Medium Priority:
5. Audit all components with fixed widths
6. Add utility classes for mobile-safe containers

### Low Priority:
7. Add detection script to CI/CD
8. Document mobile-first width guidelines

---

## Prevention Guidelines

### For Future Development:

1. **Never use fixed px widths on mobile** without viewport check
   ```tsx
   ❌ className="max-w-[500px]"
   ✅ className="max-w-[min(500px,90vw)]"
   ✅ className="sm:max-w-[500px]"  // Only on sm+ breakpoints
   ```

2. **Always test padding + content width**
   ```tsx
   ❌ <div className="px-8 max-w-[500px]">
   ✅ <div className="px-4 sm:px-8 max-w-full sm:max-w-[500px]">
   ```

3. **Use container classes**
   ```tsx
   ✅ <div className="container mx-auto px-4">
   ```

4. **Add overflow control to page wrappers**
   ```tsx
   ✅ <div className="overflow-x-hidden">
   ```

5. **Use viewport-relative units on mobile**
   ```tsx
   ✅ className="w-full sm:w-auto"
   ✅ className="max-w-screen-sm"
   ```

---

## Quick Fix Summary

**Minimum changes to fix the issue:**

1. Update `src/app/globals.css`:
```css
html, body {
  height: 100%;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  overflow-x: hidden;  /* ← ADD */
  max-width: 100vw;    /* ← ADD */
}
```

2. Update `src/app/page.tsx`:
```tsx
return (
  <div className="overflow-x-hidden">  {/* ← ADD WRAPPER */}
    <Navigation />
    <Hero2 />
    {/* ... rest */}
  </div>
);
```

3. Update `src/components/home/Hero2.tsx`:
```tsx
// Remove mobile max-widths, keep responsive
<h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-[#2a3443] mb-3 md:mb-4 leading-[1.15] sm:leading-tight break-words text-balance sm:max-w-[550px] md:max-w-full">

<p className="text-base sm:text-lg text-[#2a3443]/80 mb-6 md:mb-8 break-words text-balance sm:max-w-[500px] md:max-w-full leading-relaxed">
```

**Test on mobile (375px) after applying these changes.**

---

## Expected Outcome

After applying fixes:
- ✅ No horizontal scrolling on any mobile device
- ✅ Content stays within viewport bounds
- ✅ Proper responsive behavior on 320px - 428px screens
- ✅ No layout shifts or cut-off content

---

## Need Help?

If issue persists after applying fixes:
1. Run the detection script (above) in browser console
2. Check which element has the largest overflow
3. Add element details to this document
4. Apply targeted fix to that specific component
