// Generate array on the server side
const services = [
  {
    icon: 'Package',
    title: "Sourcing & Procurement",
    description: "Our team of skilled professionals in Sourcing & Procurement is committed to providing personalised assistance in acquiring your ideal vehicle at the most competitive price. We aim to guide you through the car purchasing process, helping you navigate potential pitfalls that may arise.",
    details: "Through our tailored search process, we aim to unveil the potential savings available to you and enable you to compare the finest vehicles within your specified budget. Throughout the procurement journey, we ensure that you remain informed at every step. Furthermore, for your peace of mind, all relevant documentation is securely dispatched to you via DHL prior to your car's anticipated arrival."
  },
  {
    icon: 'Truck',
    title: "Freight & Logistics",
    description: "With our extensive presence spanning South Africa, the UK, Kenya, Uganda, Tanzania, Zambia, Zimbabwe, Botswana, Lesotho, Eswatini, Mozambique, and Namibia, rest assured that every aspect of your vehicle's journey is meticulously managed from the moment you engage with us until its arrival by air, sea, or road.",
    details: "Our proficient teams handle customs clearance, registration, and local compliance management upon your request, ensuring a seamless process. Furthermore, we go the extra mile by personally delivering your vehicle, allowing you to embark on your journey home with ease and confidence."
  },
  {
    icon: 'Shield',
    title: "Insurance",
    description: "We prioritise what matters most to you by offering straightforward, premium vehicle coverage accompanied by insurance solutions designed to provide comprehensive peace of mind.",
    details: "When partnering with us, we collaborate closely with you to secure the optimal insurance coverage for your vehicle, whether it's procured from South Africa or the UK, ensuring protection from the point of purchase until it reaches your garage. Our insurance solutions are designed to be simple and transparent, offering you a seamless experience throughout."
  },
  {
    icon: 'CreditCard',
    title: "Financing",
    description: "Our tailored car finance solution caters specifically to clients in Kenya seeking to import their vehicles through our partnered financial institutions.",
    details: "For clients in other countries, we offer the convenience of securing their car with a 20% deposit, with the remaining balance payable within one month, ensuring a streamlined process regardless of location."
  },
  {
    icon: 'FileCheck',
    title: "Duty Free Consultations",
    description: "Save by buying a UK or South African luxury car tax free through WeExportCars.Africa. We will reclaim the VAT when the car is permanently exported, saving you money vs buying the same car directly from the dealer.",
    details: "There are no hidden costs. We will quote you honestly for the import service you want. Surprises are not our thing."
  },
  {
    icon: 'Users',
    title: "Diplomat Relocations",
    description: "Are you a diplomat preparing for relocation? We specialize in providing top-tier international and domestic door-to-door relocation services, meticulously managed through our network of offices and trusted partners worldwide.",
    details: "For diplomats and public officials, international moves are often inherent to their roles. However, we understand that the relocation process should not overshadow your primary responsibilities. Your primary focus should be on a swift and seamless diplomatic transition. Allow us to handle the logistical details: from the secure handling of sensitive information to comprehensive knowledge of regulations at both the origin and destination countries."
  }
];

export { services };

// Client component for dynamic rendering
'use client';

import React from 'react';
import { COLORS } from '@/components/wec/constants';
import * as Icons from 'lucide-react';

const services = [
  {
    icon: Package,
    title: "Sourcing & Procurement",
    description: "Our team of skilled professionals in Sourcing & Procurement is committed to providing personalised assistance in acquiring your ideal vehicle at the most competitive price. We aim to guide you through the car purchasing process, helping you navigate potential pitfalls that may arise.",
    details: "Through our tailored search process, we aim to unveil the potential savings available to you and enable you to compare the finest vehicles within your specified budget. Throughout the procurement journey, we ensure that you remain informed at every step. Furthermore, for your peace of mind, all relevant documentation is securely dispatched to you via DHL prior to your car's anticipated arrival."
  },
  {
    icon: Truck,
    title: "Freight & Logistics",
    description: "With our extensive presence spanning South Africa, the UK, Kenya, Uganda, Tanzania, Zambia, Zimbabwe, Botswana, Lesotho, Eswatini, Mozambique, and Namibia, rest assured that every aspect of your vehicle's journey is meticulously managed from the moment you engage with us until its arrival by air, sea, or road.",
    details: "Our proficient teams handle customs clearance, registration, and local compliance management upon your request, ensuring a seamless process. Furthermore, we go the extra mile by personally delivering your vehicle, allowing you to embark on your journey home with ease and confidence."
  },
  {
    icon: Shield,
    title: "Insurance",
    description: "We prioritise what matters most to you by offering straightforward, premium vehicle coverage accompanied by insurance solutions designed to provide comprehensive peace of mind.",
    details: "When partnering with us, we collaborate closely with you to secure the optimal insurance coverage for your vehicle, whether it's procured from South Africa or the UK, ensuring protection from the point of purchase until it reaches your garage. Our insurance solutions are designed to be simple and transparent, offering you a seamless experience throughout."
  },
  {
    icon: CreditCard,
    title: "Financing",
    description: "Our tailored car finance solution caters specifically to clients in Kenya seeking to import their vehicles through our partnered financial institutions.",
    details: "For clients in other countries, we offer the convenience of securing their car with a 20% deposit, with the remaining balance payable within one month, ensuring a streamlined process regardless of location."
  },
  {
    icon: FileCheck,
    title: "Duty Free Consultations",
    description: "Save by buying a UK or South African luxury car tax free through WeExportCars.Africa. We will reclaim the VAT when the car is permanently exported, saving you money vs buying the same car directly from the dealer.",
    details: "There are no hidden costs. We will quote you honestly for the import service you want. Surprises are not our thing."
  },
  {
    icon: Users,
    title: "Diplomat Relocations",
    description: "Are you a diplomat preparing for relocation? We specialize in providing top-tier international and domestic door-to-door relocation services, meticulously managed through our network of offices and trusted partners worldwide.",
    details: "For diplomats and public officials, international moves are often inherent to their roles. However, we understand that the relocation process should not overshadow your primary responsibilities. Your primary focus should be on a swift and seamless diplomatic transition. Allow us to handle the logistical details: from the secure handling of sensitive information to comprehensive knowledge of regulations at both the origin and destination countries."
  }
];

const ServiceCard: React.FC<{
  service: typeof services[0];
  index: number;
  isVisible: boolean;
}> = React.memo(({ service, index, isVisible }) => (
  <div
    key={service.title}
    className={`bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 ${
      isVisible ? 'animate-scale-in' : 'opacity-0'
    }`}
    style={{ 
      animationDelay: `${index * 0.1}s`,
      willChange: 'transform, opacity'
    }}
  >
    <div className="p-8 space-y-4">
      <div 
        className="w-16 h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-all duration-300" 
        style={{ backgroundColor: `${COLORS.accent}10` }}
      >
        <service.icon className="h-8 w-8" style={{ color: COLORS.accent }} />
      </div>
      <h3 className="text-2xl font-semibold" style={{ color: COLORS.dark }}>{service.title}</h3>
      <p className="leading-relaxed" style={{ color: COLORS.dark }}>{service.description}</p>
      <p className="text-sm leading-relaxed pt-2 border-t" style={{ color: `${COLORS.dark}99` }}>
        {service.details}
      </p>
    </div>
  </div>
));

const useIntersectionObserver = () => {
  const [isVisible, setIsVisible] = React.useState(false);
  const ref = React.useRef<HTMLElement>(null);

  React.useEffect(() => {
    if (typeof window === 'undefined' || !('IntersectionObserver' in window)) {
      setIsVisible(true); // If no IntersectionObserver support, show content immediately
      return;
    }

    let observer: IntersectionObserver | null = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer?.disconnect();
        }
      },
      { threshold: 0.1 }
    );

    if (ref.current) {
      observer.observe(ref.current);
    }

    return () => {
      if (observer) {
        observer.disconnect();
        observer = null;
      }
    };
  }, []);

  return [ref, isVisible] as const;
};

const ServicesGrid: React.FC = () => {
  const [ref, isVisible] = useIntersectionObserver();

  return (
    <section className="py-20" style={{ backgroundColor: COLORS.light }} ref={ref}>
      <div className="container mx-auto px-4">
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
          {services.map((service, index) => (
            <ServiceCard
              key={service.title}
              service={service}
              index={index}
              isVisible={isVisible}
            />
          ))}
        </div>
      </div>
    </section>
  );
};

export default ServicesGrid;